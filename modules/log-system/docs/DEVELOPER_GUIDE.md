# ğŸ”§ Recursive ë¡œê·¸ ì‹œìŠ¤í…œ ê°œë°œì ê°€ì´ë“œ

## ğŸ“‹ **ëª©ì°¨**
- [ì•„í‚¤í…ì²˜ ê°œìš”](#ì•„í‚¤í…ì²˜-ê°œìš”)
- [ê°œë°œ í™˜ê²½ ì„¤ì •](#ê°œë°œ-í™˜ê²½-ì„¤ì •)
- [ì½”ë“œ êµ¬ì¡°](#ì½”ë“œ-êµ¬ì¡°)
- [ì»¤ìŠ¤í…€ ìˆ˜ì§‘ê¸° ê°œë°œ](#ì»¤ìŠ¤í…€-ìˆ˜ì§‘ê¸°-ê°œë°œ)
- [MCP ë„êµ¬ ê°œë°œ](#mcp-ë„êµ¬-ê°œë°œ)
- [í…ŒìŠ¤íŠ¸ ì‘ì„±](#í…ŒìŠ¤íŠ¸-ì‘ì„±)

---

## ğŸ—ï¸ **ì•„í‚¤í…ì²˜ ê°œìš”**

### **ì‹œìŠ¤í…œ êµ¬ì„± ìš”ì†Œ**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Recursive Platform                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Node.js Application Layer                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚   MCP Tools     â”‚ â”‚   Collectors    â”‚ â”‚  Web Server  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Log System Bridge (Node.js)                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ JSON-RPC Client â”‚ â”‚ Config Manager  â”‚ â”‚ Event System â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Python Log Server                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ JSON-RPC Server â”‚ â”‚ Storage Engine  â”‚ â”‚ Query Engine â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  SQLite Database                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚   Log Entries   â”‚ â”‚   Full-Text     â”‚ â”‚   Indexes    â”‚   â”‚
â”‚  â”‚     Table       â”‚ â”‚   Search        â”‚ â”‚              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### **ë°ì´í„° íë¦„**

```
Application â†’ Collectors â†’ Bridge â†’ Python Server â†’ SQLite
     â†“              â†“         â†“           â†“           â†“
   MCP Tools â†â”€â”€ Query API â†â”€â”€â”´â”€â”€â”€ JSON-RPC â†â”€â”€ Storage
```

---

## ğŸš€ **ê°œë°œ í™˜ê²½ ì„¤ì •**

### **í•„ìˆ˜ ìš”êµ¬ì‚¬í•­**

- Node.js 16+ 
- Python 3.8+
- SQLite 3.35+

### **ê°œë°œ í™˜ê²½ êµ¬ì¶•**

```bash
# 1. ì˜ì¡´ì„± ì„¤ì¹˜
cd modules/log-system
npm install
pip install -r ../../requirements.txt

# 2. ê°œë°œ í™˜ê²½ ì„¤ì •
npm run logs:setup:dev

# 3. í…ŒìŠ¤íŠ¸ ì‹¤í–‰
npm test

# 4. ê°œë°œ ì„œë²„ ì‹œì‘
npm run logs:dev
```

---

## ğŸ“ **ì½”ë“œ êµ¬ì¡°**

### **ë””ë ‰í† ë¦¬ êµ¬ì¡°**

```
modules/log-system/
â”œâ”€â”€ src/                     # Node.js ì†ŒìŠ¤ ì½”ë“œ
â”‚   â”œâ”€â”€ index.js            # ë©”ì¸ ì§„ì…ì 
â”‚   â”œâ”€â”€ log-system-bridge.js # Python ì„œë²„ ë¸Œë¦¿ì§€
â”‚   â”œâ”€â”€ mcp-handler.js      # MCP í•¸ë“¤ëŸ¬
â”‚   â”œâ”€â”€ mcp-tools.js        # MCP ë„êµ¬ ì •ì˜
â”‚   â”œâ”€â”€ collectors/         # ë¡œê·¸ ìˆ˜ì§‘ê¸°
â”‚   â””â”€â”€ utils/              # ìœ í‹¸ë¦¬í‹°
â”œâ”€â”€ python/                 # Python ì„œë²„ ì½”ë“œ
â”‚   â”œâ”€â”€ main.py            # Python ì§„ì…ì 
â”‚   â”œâ”€â”€ server.py          # HTTP/JSON-RPC ì„œë²„
â”‚   â”œâ”€â”€ storage.py         # ë°ì´í„° ì €ì¥ ì—”ì§„
â”‚   â””â”€â”€ collectors.py      # Python ìˆ˜ì§‘ê¸°
â”œâ”€â”€ config/                # ì„¤ì • íŒŒì¼
â”œâ”€â”€ tests/                 # í…ŒìŠ¤íŠ¸ íŒŒì¼
â””â”€â”€ docs/                  # ë¬¸ì„œ
```

### **ì£¼ìš” í´ë˜ìŠ¤**

#### **LogSystemBridge**

```javascript
class LogSystemBridge extends EventEmitter {
  constructor(config) {
    // ë¸Œë¦¿ì§€ ì´ˆê¸°í™”
  }
  
  async start() {
    // ì‹œìŠ¤í…œ ì‹œì‘
  }
  
  async log(entry) {
    // ë¡œê·¸ ê¸°ë¡
  }
  
  async query(params) {
    // ë¡œê·¸ ì¡°íšŒ
  }
}
```

---

## ğŸ”Œ **ì»¤ìŠ¤í…€ ìˆ˜ì§‘ê¸° ê°œë°œ**

### **ê¸°ë³¸ ìˆ˜ì§‘ê¸° êµ¬ì¡°**

```javascript
class CustomCollector extends EventEmitter {
  constructor(name, config = {}) {
    super();
    this.name = name;
    this.config = {
      enabled: true,
      buffer_size: 100,
      flush_interval: 5000,
      ...config
    };
    
    this.buffer = [];
    this.stats = {
      collected: 0,
      errors: 0,
      last_collection: null
    };
  }
  
  async initialize(logSystem) {
    this.logSystem = logSystem;
    this.startBufferFlush();
  }
  
  async collect(data) {
    try {
      const logEntry = this.transformData(data);
      this.buffer.push(logEntry);
      this.stats.collected++;
      this.stats.last_collection = new Date();
      
      if (this.buffer.length >= this.config.buffer_size) {
        await this.flush();
      }
      
      this.emit('collected', logEntry);
    } catch (error) {
      this.stats.errors++;
      this.emit('error', error);
    }
  }
  
  transformData(data) {
    return {
      level: 'INFO',
      message: `Custom data: ${JSON.stringify(data)}`,
      source: this.name,
      metadata: data,
      timestamp: new Date().toISOString()
    };
  }
  
  async flush() {
    if (this.buffer.length === 0) return;
    
    const entries = this.buffer.splice(0);
    await this.logSystem.logBatch(entries);
    this.emit('flushed', entries.length);
  }
  
  startBufferFlush() {
    setInterval(() => {
      this.flush().catch(error => this.emit('error', error));
    }, this.config.flush_interval);
  }
  
  getStats() {
    return { ...this.stats };
  }
}
```

### **ìˆ˜ì§‘ê¸° ë“±ë¡**

```javascript
const { RecursiveCollectors } = require('@recursive/log-system');

// ì»¤ìŠ¤í…€ ìˆ˜ì§‘ê¸° ìƒì„±
const customCollector = new CustomCollector('my_custom_collector', {
  enabled: true,
  buffer_size: 50,
  flush_interval: 3000
});

// ìˆ˜ì§‘ê¸° ë“±ë¡
collectors.registerCollector('my_custom_collector', customCollector);

// ë°ì´í„° ìˆ˜ì§‘
customCollector.collect({ user_id: 123, action: 'login' });
```

### **íŠ¹í™”ëœ ìˆ˜ì§‘ê¸° ì˜ˆì œ**

#### **ë°ì´í„°ë² ì´ìŠ¤ ì¿¼ë¦¬ ìˆ˜ì§‘ê¸°**

```javascript
class DatabaseCollector extends CustomCollector {
  constructor(config) {
    super('database_queries', config);
  }
  
  transformData(queryData) {
    return {
      level: queryData.duration > 1000 ? 'WARN' : 'DEBUG',
      message: `DB Query: ${queryData.query}`,
      source: 'database',
      metadata: {
        query: queryData.query,
        duration_ms: queryData.duration,
        rows_affected: queryData.rowsAffected,
        table: queryData.table
      }
    };
  }
}
```

---

## ğŸ› ï¸ **MCP ë„êµ¬ ê°œë°œ**

### **MCP ë„êµ¬ êµ¬ì¡°**

```javascript
const customTool = {
  name: "custom_analysis",
  description: "ì»¤ìŠ¤í…€ ë¡œê·¸ ë¶„ì„ ë„êµ¬",
  inputSchema: {
    type: "object",
    properties: {
      timerange: {
        type: "string",
        default: "1h",
        description: "ë¶„ì„í•  ì‹œê°„ ë²”ìœ„"
      },
      custom_filter: {
        type: "string",
        description: "ì»¤ìŠ¤í…€ í•„í„° ì¡°ê±´"
      }
    }
  },
  handler: async (params, logSystem) => {
    // ë„êµ¬ ë¡œì§ êµ¬í˜„
    const logs = await logSystem.query({
      since: params.timerange,
      // ì»¤ìŠ¤í…€ í•„í„° ì ìš©
    });
    
    // ë¶„ì„ ë¡œì§
    const analysis = performCustomAnalysis(logs);
    
    return {
      summary: {
        timerange: params.timerange,
        total_analyzed: logs.count,
        analysis_timestamp: new Date().toISOString()
      },
      results: analysis
    };
  }
};
```

### **ë„êµ¬ ë“±ë¡**

```javascript
// MCP ë„êµ¬ ë°°ì—´ì— ì¶”ê°€
const logTools = [
  // ê¸°ì¡´ ë„êµ¬ë“¤...
  customTool
];

// ë˜ëŠ” ëŸ°íƒ€ì„ì— ì¶”ê°€
logSystem.addMCPTool(customTool);
```

---

## ğŸ§ª **í…ŒìŠ¤íŠ¸ ì‘ì„±**

### **ë‹¨ìœ„ í…ŒìŠ¤íŠ¸**

```javascript
// tests/custom-collector.test.js
const CustomCollector = require('../src/collectors/custom-collector');

describe('CustomCollector', () => {
  let collector;
  let mockLogSystem;
  
  beforeEach(() => {
    mockLogSystem = {
      logBatch: jest.fn().mockResolvedValue({ success: true })
    };
    
    collector = new CustomCollector('test_collector', {
      buffer_size: 3,
      flush_interval: 1000
    });
    
    collector.initialize(mockLogSystem);
  });
  
  test('should collect and transform data', async () => {
    const testData = { user: 'test', action: 'login' };
    
    await collector.collect(testData);
    
    expect(collector.buffer).toHaveLength(1);
    expect(collector.buffer[0]).toMatchObject({
      level: 'INFO',
      source: 'test_collector',
      metadata: testData
    });
  });
});
```

### **í†µí•© í…ŒìŠ¤íŠ¸**

```javascript
// tests/integration/full-workflow.test.js
const { createLogSystemFromConfig } = require('../src/index');

describe('Full Workflow Integration', () => {
  let logSystem;
  
  beforeAll(async () => {
    logSystem = await createLogSystemFromConfig({
      server: { port: 8889 },
      storage: { db_path: ':memory:' }
    });
    
    await logSystem.start();
  });
  
  afterAll(async () => {
    await logSystem.stop();
  });
  
  test('should handle complete log workflow', async () => {
    // 1. ë¡œê·¸ ê¸°ë¡
    const result = await logSystem.log({
      level: 'INFO',
      message: 'Integration test log',
      source: 'test'
    });
    expect(result.success).toBe(true);
    
    // 2. ë¡œê·¸ ì¡°íšŒ
    const query = await logSystem.query({
      sources: ['test'],
      since: '1m'
    });
    
    expect(query.logs).toHaveLength(1);
  });
});
```

---

## ğŸ“š **ì¶”ê°€ ë¦¬ì†ŒìŠ¤**

- [API ì°¸ì¡°](./API_REFERENCE.md)
- [ì‚¬ìš©ì ê°€ì´ë“œ](./USER_GUIDE.md)
- [íŠ¸ëŸ¬ë¸”ìŠˆíŒ… ê°€ì´ë“œ](./TROUBLESHOOTING.md)
- [í™˜ê²½ ì„¤ì • ê°€ì´ë“œ](./ENVIRONMENT_SETUP.md) 