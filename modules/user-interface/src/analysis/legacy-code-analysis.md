# ğŸ” Legacy Code Analysis Report

## ğŸ“‹ ë¶„ì„ ê°œìš”

**ë¶„ì„ ëŒ€ìƒ**: `core/server/public/` ë””ë ‰í† ë¦¬ì˜ ê¸°ì¡´ í”„ë¡ íŠ¸ì—”ë“œ ì½”ë“œ  
**ë¶„ì„ ì¼ì‹œ**: 2024ë…„ í˜„ì¬  
**ë¶„ì„ ëª©ì **: TypeScript ëª¨ë“ˆí˜• ì•„í‚¤í…ì²˜ë¡œì˜ ë§ˆì´ê·¸ë ˆì´ì…˜ ì¤€ë¹„  

---

## ğŸ“ íŒŒì¼ êµ¬ì¡° ë¶„ì„

### í˜„ì¬ êµ¬ì¡°
```
core/server/public/
â”œâ”€â”€ index.html (1,720ì¤„)
â”œâ”€â”€ js/
â”‚   â”œâ”€â”€ websocket-client.js (221ì¤„)
â”‚   â”œâ”€â”€ mcp-client.js (271ì¤„)
â”‚   â””â”€â”€ modules/
â”‚       â””â”€â”€ mcp-client.js (478ì¤„)
```

### ë¬¸ì œì 
- **ëª¨ë†€ë¦¬ì‹ êµ¬ì¡°**: ëª¨ë“  ì½”ë“œê°€ í•˜ë‚˜ì˜ HTML íŒŒì¼ì— ì§‘ì¤‘
- **ì¸ë¼ì¸ ì½”ë“œ**: CSS(~800ì¤„)ì™€ JavaScript(~500ì¤„)ê°€ HTMLì— í¬í•¨
- **ëª¨ë“ˆí™” ë¶€ì¡±**: ê¸°ëŠ¥ë³„ ë¶„ë¦¬ê°€ ë˜ì–´ìˆì§€ ì•ŠìŒ
- **íƒ€ì… ì•ˆì „ì„± ì—†ìŒ**: JavaScriptë¡œë§Œ ì‘ì„±ë˜ì–´ ëŸ°íƒ€ì„ ì˜¤ë¥˜ ìœ„í—˜

---

## ğŸ¨ CSS ë¶„ì„

### í˜„ì¬ ìƒíƒœ (ì¸ë¼ì¸ CSS ~800ì¤„)

**1. ë””ìì¸ ì‹œìŠ¤í…œ**
```css
:root {
  /* Modern Design System */
  --primary-500: #3b82f6;
  --gray-50: #f9fafb;
  /* Layout Variables */
  --header-height: 64px;
  --sidebar-width: 280px;
  --ai-sidebar-width: 360px;
}
```

**2. ë ˆì´ì•„ì›ƒ ì‹œìŠ¤í…œ**
- **Grid Layout**: 3-column grid (sidebar + main + ai-sidebar)
- **Responsive**: Mobile-first approach
- **Flexible**: ì‚¬ì´ë“œë°” ì ‘ê¸°/í¼ì¹˜ê¸° ê¸°ëŠ¥

**3. ì»´í¬ë„ŒíŠ¸ ìŠ¤íƒ€ì¼**
- Header, Sidebar, Main Content, AI Sidebar
- Button, Input, Card, Modal ë“± ê¸°ë³¸ ì»´í¬ë„ŒíŠ¸
- ìƒíƒœë³„ ìŠ¤íƒ€ì¼ (hover, active, disabled)

**ë§ˆì´ê·¸ë ˆì´ì…˜ ì „ëµ**:
- CSS Modules ë˜ëŠ” Styled Components ì‚¬ìš©
- ë””ìì¸ í† í°ì„ TypeScript ìƒìˆ˜ë¡œ ë³€í™˜
- ì»´í¬ë„ŒíŠ¸ë³„ ìŠ¤íƒ€ì¼ íŒŒì¼ ë¶„ë¦¬

---

## ğŸ”§ JavaScript ë¶„ì„

### 1. WebSocket Client (`websocket-client.js` - 221ì¤„)

**ì£¼ìš” ê¸°ëŠ¥**:
- WebSocket ì—°ê²° ê´€ë¦¬
- ìë™ ì¬ì—°ê²° (ìµœëŒ€ 5íšŒ)
- í•˜íŠ¸ë¹„íŠ¸ ì‹œìŠ¤í…œ (15ì´ˆ ê°„ê²©)
- ì´ë²¤íŠ¸ ê¸°ë°˜ ì•„í‚¤í…ì²˜

**í´ë˜ìŠ¤ êµ¬ì¡°**:
```javascript
class WebSocketClient {
  constructor(url)
  on(event, callback)
  emit(event, data)
  connect()
  send(data)
  disconnect()
  getConnectionStatus()
}
```

**ë§ˆì´ê·¸ë ˆì´ì…˜ ê³„íš**:
- TypeScript ì¸í„°í˜ì´ìŠ¤ ì •ì˜
- `modules/user-interface/src/services/websocket/` ë¡œ ì´ë™
- ê¸°ì¡´ EventManagerì™€ í†µí•©

### 2. MCP Client (`mcp-client.js` - 271ì¤„)

**ì£¼ìš” ê¸°ëŠ¥**:
- MCP (Model Context Protocol) WebSocket í†µì‹ 
- JSON-RPC 2.0 í”„ë¡œí† ì½œ ì§€ì›
- Tool í˜¸ì¶œ ì‹œìŠ¤í…œ
- ë¹„ë™ê¸° ìš”ì²­/ì‘ë‹µ ê´€ë¦¬

**í´ë˜ìŠ¤ êµ¬ì¡°**:
```javascript
class MCPClient {
  constructor(wsUrl)
  connect()
  sendMessage(message)
  callTool(toolName, args)
  startInteractiveDiagnosis(params)
  respondToDiagnosis(sessionId, params)
}
```

**ë§ˆì´ê·¸ë ˆì´ì…˜ ê³„íš**:
- TypeScript ì¸í„°í˜ì´ìŠ¤ ì •ì˜
- `modules/user-interface/src/services/mcp/` ë¡œ ì´ë™
- íƒ€ì… ì•ˆì „ì„± ê°•í™”

### 3. ì¸ë¼ì¸ JavaScript (~500ì¤„)

**ì£¼ìš” ê¸°ëŠ¥ë“¤**:

**A. ë ˆì´ì•„ì›ƒ ê´€ë¦¬**
```javascript
// ì‚¬ì´ë“œë°” í† ê¸€
function toggleLeftSidebar()
function toggleRightSidebar()
function handleLayoutResize()

// ë°˜ì‘í˜• ë ˆì´ì•„ì›ƒ
function initializeLayout()
function setupEventListeners()
```

**B. ì„¹ì…˜ ê´€ë¦¬**
```javascript
function showSection(sectionName)
// WebSocket Demo, MCP Tools, Settings ë“±
```

**C. WebSocket ë°ëª¨**
```javascript
function initializeWebSocket()
function sendMessage()
function sendEcho()
function sendBroadcast()
function refreshMetrics()
```

**D. ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜**
```javascript
function logMessage(message, type)
function debounce(func, wait)
function logPerformanceMetrics()
```

**ë§ˆì´ê·¸ë ˆì´ì…˜ ê³„íš**:
- ê¸°ëŠ¥ë³„ë¡œ ëª¨ë“ˆ ë¶„ë¦¬
- TypeScript í´ë˜ìŠ¤/ì¸í„°í˜ì´ìŠ¤ë¡œ ë³€í™˜
- ì»´í¬ë„ŒíŠ¸ ê¸°ë°˜ ì•„í‚¤í…ì²˜ë¡œ ì¬êµ¬ì„±

---

## ğŸ—ï¸ ì•„í‚¤í…ì²˜ ë¶„ì„

### í˜„ì¬ ì•„í‚¤í…ì²˜
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           index.html                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚        Inline CSS              â”‚â”‚
â”‚  â”‚     (~800 lines)               â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚      Inline JavaScript         â”‚â”‚
â”‚  â”‚     (~500 lines)               â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚     External Scripts           â”‚â”‚
â”‚  â”‚  - websocket-client.js         â”‚â”‚
â”‚  â”‚  - mcp-client.js               â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ë¬¸ì œì 
1. **ë‹¨ì¼ íŒŒì¼ ì˜ì¡´ì„±**: ëª¨ë“  ì½”ë“œê°€ í•˜ë‚˜ì˜ HTML íŒŒì¼ì— ì˜ì¡´
2. **ì „ì—­ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ì˜¤ì—¼**: ëª¨ë“  í•¨ìˆ˜ê°€ ì „ì—­ ìŠ¤ì½”í”„ì— ì¡´ì¬
3. **ëª¨ë“ˆ ê°„ ì˜ì¡´ì„± ë¶ˆë¶„ëª…**: ì•”ì‹œì  ì˜ì¡´ì„±ìœ¼ë¡œ ì¸í•œ ìœ ì§€ë³´ìˆ˜ ì–´ë ¤ì›€
4. **íƒ€ì… ì•ˆì „ì„± ë¶€ì¡±**: ëŸ°íƒ€ì„ ì˜¤ë¥˜ ìœ„í—˜
5. **í…ŒìŠ¤íŠ¸ ë¶ˆê°€ëŠ¥**: ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‘ì„± ì–´ë ¤ì›€

### ëª©í‘œ ì•„í‚¤í…ì²˜
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        TypeScript Modules           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚         Core System             â”‚â”‚
â”‚  â”‚  - App, Config, Events, etc.    â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚        Components               â”‚â”‚
â”‚  â”‚  - Layout, Common, Features     â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚         Services                â”‚â”‚
â”‚  â”‚  - WebSocket, MCP, API, etc.    â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š ë³µì¡ë„ ë¶„ì„

### ì½”ë“œ ë©”íŠ¸ë¦­ìŠ¤

| íŒŒì¼ | ë¼ì¸ ìˆ˜ | í•¨ìˆ˜ ìˆ˜ | í´ë˜ìŠ¤ ìˆ˜ | ë³µì¡ë„ |
|------|---------|---------|-----------|--------|
| index.html | 1,720 | ~25 | 0 | ë†’ìŒ |
| websocket-client.js | 221 | 15 | 1 | ì¤‘ê°„ |
| mcp-client.js | 271 | 12 | 1 | ì¤‘ê°„ |
| **ì´í•©** | **2,212** | **~52** | **2** | **ë†’ìŒ** |

### ìœ„í—˜ë„ í‰ê°€

**ğŸ”´ ë†’ì€ ìœ„í—˜**:
- ì¸ë¼ì¸ ì½”ë“œë¡œ ì¸í•œ ìœ ì§€ë³´ìˆ˜ì„± ì €í•˜
- ì „ì—­ ë³€ìˆ˜ ì‚¬ìš©ìœ¼ë¡œ ì¸í•œ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ì¶©ëŒ
- íƒ€ì… ì•ˆì „ì„± ë¶€ì¡±

**ğŸŸ¡ ì¤‘ê°„ ìœ„í—˜**:
- ëª¨ë“ˆ ê°„ ì˜ì¡´ì„± ë¶ˆë¶„ëª…
- í…ŒìŠ¤íŠ¸ ì½”ë“œ ë¶€ì¬

**ğŸŸ¢ ë‚®ì€ ìœ„í—˜**:
- ê¸°ì¡´ ê¸°ëŠ¥ì€ ì•ˆì •ì ìœ¼ë¡œ ë™ì‘
- ì½”ë“œ í’ˆì§ˆì€ ì–‘í˜¸í•œ í¸

---

## ğŸ¯ ë§ˆì´ê·¸ë ˆì´ì…˜ ìš°ì„ ìˆœìœ„

### Phase 1: í•µì‹¬ ì‹œìŠ¤í…œ (ì™„ë£Œ)
- [x] íƒ€ì… ì •ì˜
- [x] ì„¤ì • ê´€ë¦¬
- [x] ì´ë²¤íŠ¸ ì‹œìŠ¤í…œ
- [x] ìƒëª…ì£¼ê¸° ê´€ë¦¬
- [x] ë¼ìš°í„° ì‹œìŠ¤í…œ
- [x] ë©”ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜ í´ë˜ìŠ¤

### Phase 2: ì„œë¹„ìŠ¤ ë ˆì´ì–´ (ë‹¤ìŒ ë‹¨ê³„)
- [ ] WebSocket ì„œë¹„ìŠ¤ ë§ˆì´ê·¸ë ˆì´ì…˜
- [ ] MCP ì„œë¹„ìŠ¤ ë§ˆì´ê·¸ë ˆì´ì…˜
- [ ] API ì„œë¹„ìŠ¤ êµ¬í˜„

### Phase 3: ì»´í¬ë„ŒíŠ¸ ë ˆì´ì–´
- [ ] ë ˆì´ì•„ì›ƒ ì»´í¬ë„ŒíŠ¸
- [ ] ê³µí†µ ì»´í¬ë„ŒíŠ¸
- [ ] ê¸°ëŠ¥ë³„ ì»´í¬ë„ŒíŠ¸

### Phase 4: í†µí•© ë° ìµœì í™”
- [ ] ê¸°ì¡´ ì½”ë“œì™€ì˜ í˜¸í™˜ì„± í™•ë³´
- [ ] ì„±ëŠ¥ ìµœì í™”
- [ ] í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±

---

## ğŸ”„ í˜¸í™˜ì„± ì „ëµ

### ì ì§„ì  ë§ˆì´ê·¸ë ˆì´ì…˜
1. **Dual Mode**: ê¸°ì¡´ ì½”ë“œì™€ ìƒˆ ì½”ë“œ ë™ì‹œ ì§€ì›
2. **Feature Flag**: ê¸°ëŠ¥ë³„ ì „í™˜ ê°€ëŠ¥
3. **Backward Compatibility**: ê¸°ì¡´ API ìœ ì§€

### ì „í™˜ ê³„íš
```javascript
// ê¸°ì¡´ ì½”ë“œ (ë ˆê±°ì‹œ)
window.WebSocketClient = WebSocketClient;

// ìƒˆ ì½”ë“œ (TypeScript ëª¨ë“ˆ)
import { WebSocketService } from './services/websocket';

// í˜¸í™˜ì„± ë¸Œë¦¬ì§€
window.WebSocketClient = WebSocketService.createLegacyClient();
```

---

## ğŸ“ ë§ˆì´ê·¸ë ˆì´ì…˜ ì²´í¬ë¦¬ìŠ¤íŠ¸

### ì¦‰ì‹œ í•´ê²° í•„ìš”
- [ ] ì „ì—­ ë³€ìˆ˜ ì •ë¦¬
- [ ] í•¨ìˆ˜ ëª¨ë“ˆí™”
- [ ] íƒ€ì… ì •ì˜ ì¶”ê°€

### ë‹¨ê³„ì  í•´ê²°
- [ ] CSS ëª¨ë“ˆí™”
- [ ] ì»´í¬ë„ŒíŠ¸ ë¶„ë¦¬
- [ ] í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±

### ì¥ê¸° ê³„íš
- [ ] ì„±ëŠ¥ ìµœì í™”
- [ ] ì ‘ê·¼ì„± ê°œì„ 
- [ ] PWA ê¸°ëŠ¥ ì¶”ê°€

---

## ğŸ‰ ê²°ë¡ 

ê¸°ì¡´ ì½”ë“œëŠ” **ê¸°ëŠ¥ì ìœ¼ë¡œëŠ” ì•ˆì •ì **ì´ì§€ë§Œ, **êµ¬ì¡°ì ìœ¼ë¡œëŠ” ê°œì„ ì´ í•„ìš”**í•©ë‹ˆë‹¤. 

**ì£¼ìš” ê°•ì **:
- ì™„ì„±ë„ ë†’ì€ ê¸°ëŠ¥ë“¤
- ë°˜ì‘í˜• ë””ìì¸
- ì¢‹ì€ ì‚¬ìš©ì ê²½í—˜

**ì£¼ìš” ì•½ì **:
- ëª¨ë†€ë¦¬ì‹ êµ¬ì¡°
- íƒ€ì… ì•ˆì „ì„± ë¶€ì¡±
- í…ŒìŠ¤íŠ¸ ì–´ë ¤ì›€

**ë§ˆì´ê·¸ë ˆì´ì…˜ ì „ëµ**:
- **ì ì§„ì  ì „í™˜**: ê¸°ì¡´ ê¸°ëŠ¥ ìœ ì§€í•˜ë©´ì„œ ë‹¨ê³„ì  ê°œì„ 
- **íƒ€ì… ì•ˆì „ì„±**: TypeScriptë¡œ ì™„ì „ ì „í™˜
- **ëª¨ë“ˆí™”**: ê¸°ëŠ¥ë³„ ë…ë¦½ì ì¸ ëª¨ë“ˆë¡œ ë¶„ë¦¬

ì´ ë¶„ì„ì„ ë°”íƒ•ìœ¼ë¡œ **Phase 3: ì„œë¹„ìŠ¤ êµ¬í˜„**ì„ ì‹œì‘í•  ì¤€ë¹„ê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. 