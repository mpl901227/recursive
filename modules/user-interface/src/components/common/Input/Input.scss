/**
 * @fileoverview Input Component Styles
 * @description ì¬ì‚¬ìš© ê°€ëŠ¥í•œ ì…ë ¥ ì»´í¬ë„ŒíŠ¸ ìŠ¤íƒ€ì¼
 * @version 2.0.0
 */

// =============================================================================
// ğŸ¨ CSS Custom Properties (CSS Variables)
// =============================================================================

.input-container {
  // ğŸ¯ ê¸°ë³¸ ìƒ‰ìƒ
  --input-bg: #ffffff;
  --input-border: #d1d5db;
  --input-border-focus: #3b82f6;
  --input-text: #1f2937;
  --input-placeholder: #9ca3af;
  --input-label: #374151;
  
  // ğŸ¯ ìƒíƒœë³„ ìƒ‰ìƒ
  --input-border-hover: #9ca3af;
  --input-border-disabled: #e5e7eb;
  --input-bg-disabled: #f9fafb;
  --input-text-disabled: #9ca3af;
  --input-border-readonly: #e5e7eb;
  --input-bg-readonly: #f9fafb;
  
  // ğŸ¯ ê²€ì¦ ìƒíƒœ ìƒ‰ìƒ
  --input-border-valid: #10b981;
  --input-bg-valid: #ecfdf5;
  --input-text-valid: #065f46;
  --input-border-invalid: #ef4444;
  --input-bg-invalid: #fef2f2;
  --input-text-invalid: #991b1b;
  --input-border-warning: #f59e0b;
  --input-bg-warning: #fffbeb;
  --input-text-warning: #92400e;
  
  // ğŸ¯ í¬ê¸°ë³„ ì„¤ì •
  --input-height-xs: 28px;
  --input-height-sm: 32px;
  --input-height-md: 40px;
  --input-height-lg: 48px;
  --input-height-xl: 56px;
  
  --input-padding-x-xs: 8px;
  --input-padding-x-sm: 10px;
  --input-padding-x-md: 12px;
  --input-padding-x-lg: 16px;
  --input-padding-x-xl: 20px;
  
  --input-font-size-xs: 12px;
  --input-font-size-sm: 13px;
  --input-font-size-md: 14px;
  --input-font-size-lg: 16px;
  --input-font-size-xl: 18px;
  
  // ğŸ¯ ë¼ë²¨ ì„¤ì •
  --label-font-size-xs: 11px;
  --label-font-size-sm: 12px;
  --label-font-size-md: 13px;
  --label-font-size-lg: 14px;
  --label-font-size-xl: 16px;
  
  --label-margin-bottom-xs: 2px;
  --label-margin-bottom-sm: 4px;
  --label-margin-bottom-md: 6px;
  --label-margin-bottom-lg: 8px;
  --label-margin-bottom-xl: 10px;
  
  // ğŸ¯ ë©”ì‹œì§€ ì„¤ì •
  --message-font-size-xs: 10px;
  --message-font-size-sm: 11px;
  --message-font-size-md: 12px;
  --message-font-size-lg: 13px;
  --message-font-size-xl: 14px;
  
  --message-margin-top-xs: 2px;
  --message-margin-top-sm: 4px;
  --message-margin-top-md: 6px;
  --message-margin-top-lg: 8px;
  --message-margin-top-xl: 10px;
  
  // ğŸ¯ ì•„ì´ì½˜ ì„¤ì •
  --icon-size-xs: 14px;
  --icon-size-sm: 16px;
  --icon-size-md: 18px;
  --icon-size-lg: 20px;
  --icon-size-xl: 24px;
  
  --icon-spacing-xs: 6px;
  --icon-spacing-sm: 8px;
  --icon-spacing-md: 10px;
  --icon-spacing-lg: 12px;
  --icon-spacing-xl: 16px;
  
  // ğŸ¯ ê³µí†µ ì„¤ì •
  --input-border-width: 1px;
  --input-border-radius: 6px;
  --input-focus-ring-width: 3px;
  --input-focus-ring-opacity: 0.1;
  --input-transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
  --input-font-family: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif;
  --input-line-height: 1.5;
}

// =============================================================================
// ğŸ¯ Dark Theme Support
// =============================================================================

@media (prefers-color-scheme: dark) {
  .input-container {
    // ê¸°ë³¸ ìƒ‰ìƒ
    --input-bg: #1f2937;
    --input-border: #4b5563;
    --input-border-focus: #60a5fa;
    --input-text: #f9fafb;
    --input-placeholder: #6b7280;
    --input-label: #d1d5db;
    
    // ìƒíƒœë³„ ìƒ‰ìƒ
    --input-border-hover: #6b7280;
    --input-border-disabled: #374151;
    --input-bg-disabled: #111827;
    --input-text-disabled: #6b7280;
    --input-border-readonly: #374151;
    --input-bg-readonly: #111827;
    
    // ê²€ì¦ ìƒíƒœ ìƒ‰ìƒ
    --input-border-valid: #34d399;
    --input-bg-valid: #064e3b;
    --input-text-valid: #a7f3d0;
    --input-border-invalid: #f87171;
    --input-bg-invalid: #7f1d1d;
    --input-text-invalid: #fca5a5;
    --input-border-warning: #fbbf24;
    --input-bg-warning: #78350f;
    --input-text-warning: #fde68a;
  }
}

// =============================================================================
// ğŸ¯ Base Container Styles
// =============================================================================

.input-container {
  position: relative;
  display: flex;
  flex-direction: column;
  width: 100%;
  font-family: var(--input-font-family);
  
  // ì „ì²´ ë„ˆë¹„ ëª¨ë“œ
  &.full-width {
    width: 100%;
  }
  
  // ê¸°ë³¸ ìµœëŒ€ ë„ˆë¹„ ì„¤ì •
  &:not(.full-width) {
    max-width: 320px;
  }
}

// =============================================================================
// ğŸ¯ Label Styles
// =============================================================================

.input-label {
  display: block;
  color: var(--input-label);
  font-weight: 500;
  line-height: var(--input-line-height);
  transition: var(--input-transition);
  
  // í•„ìˆ˜ í‘œì‹œ
  &.required {
    .required-mark {
      color: var(--input-border-invalid);
      font-weight: 600;
    }
  }
  
  // í¬ê¸°ë³„ ìŠ¤íƒ€ì¼
  .input-xs & {
    font-size: var(--label-font-size-xs);
    margin-bottom: var(--label-margin-bottom-xs);
  }
  
  .input-sm & {
    font-size: var(--label-font-size-sm);
    margin-bottom: var(--label-margin-bottom-sm);
  }
  
  .input-md & {
    font-size: var(--label-font-size-md);
    margin-bottom: var(--label-margin-bottom-md);
  }
  
  .input-lg & {
    font-size: var(--label-font-size-lg);
    margin-bottom: var(--label-margin-bottom-lg);
  }
  
  .input-xl & {
    font-size: var(--label-font-size-xl);
    margin-bottom: var(--label-margin-bottom-xl);
  }
}

// =============================================================================
// ğŸ¯ Input Field Wrapper
// =============================================================================

.input-field-wrapper {
  position: relative;
  display: flex;
  align-items: center;
  width: 100%;
}

// =============================================================================
// ğŸ¯ Input Field Styles
// =============================================================================

.input-field {
  // ê¸°ë³¸ ìŠ¤íƒ€ì¼
  position: relative;
  width: 100%;
  background-color: var(--input-bg);
  border: var(--input-border-width) solid var(--input-border);
  border-radius: var(--input-border-radius);
  color: var(--input-text);
  font-family: var(--input-font-family);
  line-height: var(--input-line-height);
  transition: var(--input-transition);
  outline: none;
  box-sizing: border-box;
  
  // í”Œë ˆì´ìŠ¤í™€ë” ìŠ¤íƒ€ì¼
  &::placeholder {
    color: var(--input-placeholder);
    opacity: 1;
  }
  
  // í¬ì»¤ìŠ¤ ìƒíƒœ
  &:focus {
    border-color: var(--input-border-focus);
    box-shadow: 0 0 0 var(--input-focus-ring-width) rgba(59, 130, 246, var(--input-focus-ring-opacity));
  }
  
  // í˜¸ë²„ ìƒíƒœ
  &:hover:not(:disabled):not(:focus) {
    border-color: var(--input-border-hover);
  }
  
  // ë¹„í™œì„±í™” ìƒíƒœ
  &:disabled {
    background-color: var(--input-bg-disabled);
    border-color: var(--input-border-disabled);
    color: var(--input-text-disabled);
    cursor: not-allowed;
    
    &::placeholder {
      color: var(--input-text-disabled);
    }
  }
  
  // ì½ê¸° ì „ìš© ìƒíƒœ
  &:read-only {
    background-color: var(--input-bg-readonly);
    border-color: var(--input-border-readonly);
    cursor: default;
  }
  
  // í¬ê¸°ë³„ ìŠ¤íƒ€ì¼
  .input-xs & {
    height: var(--input-height-xs);
    padding: 0 var(--input-padding-x-xs);
    font-size: var(--input-font-size-xs);
  }
  
  .input-sm & {
    height: var(--input-height-sm);
    padding: 0 var(--input-padding-x-sm);
    font-size: var(--input-font-size-sm);
  }
  
  .input-md & {
    height: var(--input-height-md);
    padding: 0 var(--input-padding-x-md);
    font-size: var(--input-font-size-md);
  }
  
  .input-lg & {
    height: var(--input-height-lg);
    padding: 0 var(--input-padding-x-lg);
    font-size: var(--input-font-size-lg);
  }
  
  .input-xl & {
    height: var(--input-height-xl);
    padding: 0 var(--input-padding-x-xl);
    font-size: var(--input-font-size-xl);
  }
  
  // ì•„ì´ì½˜ì´ ìˆëŠ” ê²½ìš° íŒ¨ë”© ì¡°ì •
  .has-icon.icon-left & {
    .input-xs & { padding-left: calc(var(--input-padding-x-xs) + var(--icon-size-xs) + var(--icon-spacing-xs)); }
    .input-sm & { padding-left: calc(var(--input-padding-x-sm) + var(--icon-size-sm) + var(--icon-spacing-sm)); }
    .input-md & { padding-left: calc(var(--input-padding-x-md) + var(--icon-size-md) + var(--icon-spacing-md)); }
    .input-lg & { padding-left: calc(var(--input-padding-x-lg) + var(--icon-size-lg) + var(--icon-spacing-lg)); }
    .input-xl & { padding-left: calc(var(--input-padding-x-xl) + var(--icon-size-xl) + var(--icon-spacing-xl)); }
  }
  
  .has-icon.icon-right & {
    .input-xs & { padding-right: calc(var(--input-padding-x-xs) + var(--icon-size-xs) + var(--icon-spacing-xs)); }
    .input-sm & { padding-right: calc(var(--input-padding-x-sm) + var(--icon-size-sm) + var(--icon-spacing-sm)); }
    .input-md & { padding-right: calc(var(--input-padding-x-md) + var(--icon-size-md) + var(--icon-spacing-md)); }
    .input-lg & { padding-right: calc(var(--input-padding-x-lg) + var(--icon-size-lg) + var(--icon-spacing-lg)); }
    .input-xl & { padding-right: calc(var(--input-padding-x-xl) + var(--icon-size-xl) + var(--icon-spacing-xl)); }
  }
}

// =============================================================================
// ğŸ¯ Validation States
// =============================================================================

// ê²€ì¦ ì¤‘ ìƒíƒœ
.input-container.validating {
  .input-field {
    border-color: var(--input-border);
    
    &:focus {
      border-color: var(--input-border-focus);
    }
  }
}

// ìœ íš¨í•œ ìƒíƒœ
.input-container.validation-valid {
  .input-field {
    border-color: var(--input-border-valid);
    background-color: var(--input-bg-valid);
    
    &:focus {
      border-color: var(--input-border-valid);
      box-shadow: 0 0 0 var(--input-focus-ring-width) rgba(16, 185, 129, var(--input-focus-ring-opacity));
    }
  }
  
  .input-label {
    color: var(--input-text-valid);
  }
}

// ë¬´íš¨í•œ ìƒíƒœ
.input-container.validation-invalid {
  .input-field {
    border-color: var(--input-border-invalid);
    background-color: var(--input-bg-invalid);
    
    &:focus {
      border-color: var(--input-border-invalid);
      box-shadow: 0 0 0 var(--input-focus-ring-width) rgba(239, 68, 68, var(--input-focus-ring-opacity));
    }
  }
  
  .input-label {
    color: var(--input-text-invalid);
  }
}

// ê²½ê³  ìƒíƒœ
.input-container.validation-warning {
  .input-field {
    border-color: var(--input-border-warning);
    background-color: var(--input-bg-warning);
    
    &:focus {
      border-color: var(--input-border-warning);
      box-shadow: 0 0 0 var(--input-focus-ring-width) rgba(245, 158, 11, var(--input-focus-ring-opacity));
    }
  }
  
  .input-label {
    color: var(--input-text-warning);
  }
}

// ë¡œë”© ìƒíƒœ
.input-container.validation-loading {
  .input-field {
    border-color: var(--input-border);
    
    &:focus {
      border-color: var(--input-border-focus);
    }
  }
}

// =============================================================================
// ğŸ¯ Icon Styles
// =============================================================================

.input-icon {
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--input-placeholder);
  transition: var(--input-transition);
  pointer-events: none;
  z-index: 1;
  
  // í´ë¦­ ê°€ëŠ¥í•œ ì•„ì´ì½˜
  &.clickable {
    pointer-events: auto;
    cursor: pointer;
    border-radius: 4px;
    
    &:hover {
      color: var(--input-text);
      background-color: rgba(0, 0, 0, 0.05);
    }
    
    &:focus {
      outline: 2px solid var(--input-border-focus);
      outline-offset: 2px;
    }
    
    @media (prefers-color-scheme: dark) {
      &:hover {
        background-color: rgba(255, 255, 255, 0.1);
      }
    }
  }
  
  // ìœ„ì¹˜ë³„ ìŠ¤íƒ€ì¼
  &.icon-left {
    .input-xs & { left: var(--input-padding-x-xs); width: var(--icon-size-xs); height: var(--icon-size-xs); }
    .input-sm & { left: var(--input-padding-x-sm); width: var(--icon-size-sm); height: var(--icon-size-sm); }
    .input-md & { left: var(--input-padding-x-md); width: var(--icon-size-md); height: var(--icon-size-md); }
    .input-lg & { left: var(--input-padding-x-lg); width: var(--icon-size-lg); height: var(--icon-size-lg); }
    .input-xl & { left: var(--input-padding-x-xl); width: var(--icon-size-xl); height: var(--icon-size-xl); }
  }
  
  &.icon-right {
    .input-xs & { right: var(--input-padding-x-xs); width: var(--icon-size-xs); height: var(--icon-size-xs); }
    .input-sm & { right: var(--input-padding-x-sm); width: var(--icon-size-sm); height: var(--icon-size-sm); }
    .input-md & { right: var(--input-padding-x-md); width: var(--icon-size-md); height: var(--icon-size-md); }
    .input-lg & { right: var(--input-padding-x-lg); width: var(--icon-size-lg); height: var(--icon-size-lg); }
    .input-xl & { right: var(--input-padding-x-xl); width: var(--icon-size-xl); height: var(--icon-size-xl); }
  }
  
  // ì•„ì´ì½˜ ë‚´ë¶€ SVG/ì´ë¯¸ì§€ ìŠ¤íƒ€ì¼
  svg, img {
    width: 100%;
    height: 100%;
    fill: currentColor;
    display: block;
  }
}

// =============================================================================
// ğŸ¯ Message Styles
// =============================================================================

.input-help-text,
.input-message {
  display: block;
  line-height: var(--input-line-height);
  transition: var(--input-transition);
  
  // í¬ê¸°ë³„ ìŠ¤íƒ€ì¼
  .input-xs & {
    font-size: var(--message-font-size-xs);
    margin-top: var(--message-margin-top-xs);
  }
  
  .input-sm & {
    font-size: var(--message-font-size-sm);
    margin-top: var(--message-margin-top-sm);
  }
  
  .input-md & {
    font-size: var(--message-font-size-md);
    margin-top: var(--message-margin-top-md);
  }
  
  .input-lg & {
    font-size: var(--message-font-size-lg);
    margin-top: var(--message-margin-top-lg);
  }
  
  .input-xl & {
    font-size: var(--message-font-size-xl);
    margin-top: var(--message-margin-top-xl);
  }
}

// ë„ì›€ë§ í…ìŠ¤íŠ¸
.input-help-text {
  color: var(--input-placeholder);
}

// ê²€ì¦ ë©”ì‹œì§€
.input-message {
  font-weight: 500;
  
  // ìƒíƒœë³„ ìƒ‰ìƒ
  &.message-valid {
    color: var(--input-text-valid);
  }
  
  &.message-invalid {
    color: var(--input-text-invalid);
  }
  
  &.message-warning {
    color: var(--input-text-warning);
  }
  
  &.message-loading {
    color: var(--input-placeholder);
    
    &::before {
      content: '';
      display: inline-block;
      width: 12px;
      height: 12px;
      margin-right: 6px;
      border: 2px solid var(--input-placeholder);
      border-top-color: transparent;
      border-radius: 50%;
      animation: input-loading-spin 1s linear infinite;
      vertical-align: text-bottom;
    }
  }
}

// =============================================================================
// ğŸ¯ State Modifiers
// =============================================================================

.input-container {
  // í¬ì»¤ìŠ¤ ìƒíƒœ
  &.focused {
    .input-label {
      color: var(--input-border-focus);
    }
    
    .input-icon {
      color: var(--input-border-focus);
    }
  }
  
  // ë¹„í™œì„±í™” ìƒíƒœ
  &.disabled {
    .input-label {
      color: var(--input-text-disabled);
    }
    
    .input-icon {
      color: var(--input-text-disabled);
    }
    
    .input-help-text,
    .input-message {
      color: var(--input-text-disabled);
    }
  }
  
  // ì½ê¸° ì „ìš© ìƒíƒœ
  &.readonly {
    .input-label {
      color: var(--input-placeholder);
    }
    
    .input-icon {
      color: var(--input-placeholder);
    }
  }
  
  // ê°’ì´ ìˆëŠ” ìƒíƒœ
  &.has-value {
    .input-field {
      border-color: var(--input-border-focus);
    }
  }
  
  // ë³€ê²½ëœ ìƒíƒœ
  &.dirty {
    .input-field {
      border-left: 3px solid var(--input-border-focus);
    }
  }
  
  // í„°ì¹˜ëœ ìƒíƒœ
  &.touched {
    .input-field {
      transition: var(--input-transition);
    }
  }
}

// =============================================================================
// ğŸ¯ Special Input Types
// =============================================================================

// íŒŒì¼ ì…ë ¥
.input-field[type="file"] {
  padding: 8px;
  line-height: 1.2;
  
  &::file-selector-button {
    background-color: var(--input-border);
    border: none;
    border-radius: 4px;
    padding: 4px 8px;
    margin-right: 8px;
    color: var(--input-text);
    font-size: inherit;
    cursor: pointer;
    transition: var(--input-transition);
    
    &:hover {
      background-color: var(--input-border-hover);
    }
  }
}

// ìƒ‰ìƒ ì…ë ¥
.input-field[type="color"] {
  padding: 2px;
  cursor: pointer;
  
  &::-webkit-color-swatch-wrapper {
    padding: 0;
    border: none;
    border-radius: calc(var(--input-border-radius) - 2px);
    overflow: hidden;
  }
  
  &::-webkit-color-swatch {
    border: none;
  }
}

// ë²”ìœ„ ì…ë ¥
.input-field[type="range"] {
  padding: 0;
  background: transparent;
  border: none;
  height: auto;
  
  &:focus {
    box-shadow: none;
  }
  
  &::-webkit-slider-track {
    width: 100%;
    height: 6px;
    background: var(--input-border);
    border-radius: 3px;
  }
  
  &::-webkit-slider-thumb {
    appearance: none;
    width: 20px;
    height: 20px;
    background: var(--input-border-focus);
    border-radius: 50%;
    cursor: pointer;
    margin-top: -7px;
    transition: var(--input-transition);
    
    &:hover {
      transform: scale(1.1);
    }
  }
  
  &::-moz-range-track {
    width: 100%;
    height: 6px;
    background: var(--input-border);
    border-radius: 3px;
    border: none;
  }
  
  &::-moz-range-thumb {
    width: 20px;
    height: 20px;
    background: var(--input-border-focus);
    border-radius: 50%;
    cursor: pointer;
    border: none;
    transition: var(--input-transition);
    
    &:hover {
      transform: scale(1.1);
    }
  }
}

// ì²´í¬ë°•ìŠ¤ì™€ ë¼ë””ì˜¤
.input-field[type="checkbox"],
.input-field[type="radio"] {
  width: auto;
  height: auto;
  margin-right: 8px;
  
  .input-xs & { width: 14px; height: 14px; }
  .input-sm & { width: 16px; height: 16px; }
  .input-md & { width: 18px; height: 18px; }
  .input-lg & { width: 20px; height: 20px; }
  .input-xl & { width: 24px; height: 24px; }
}

// =============================================================================
// ğŸ¯ Animations
// =============================================================================

@keyframes input-loading-spin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

// =============================================================================
// ğŸ¯ Accessibility Features
// =============================================================================

// ê³ ëŒ€ë¹„ ëª¨ë“œ
@media (prefers-contrast: high) {
  .input-container {
    --input-border-width: 2px;
    --input-focus-ring-width: 4px;
    
    .input-field {
      &:focus {
        outline: 3px solid var(--input-border-focus);
        outline-offset: 2px;
      }
    }
  }
}

// ëª¨ì…˜ ê°ì†Œ ëª¨ë“œ
@media (prefers-reduced-motion: reduce) {
  .input-container {
    --input-transition: none;
    
    * {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
    }
  }
}

// ìŠ¤í¬ë¦° ë¦¬ë” ì „ìš© í…ìŠ¤íŠ¸
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

// =============================================================================
// ğŸ¯ Mobile Optimizations
// =============================================================================

@media (max-width: 768px) {
  .input-container {
    // ëª¨ë°”ì¼ì—ì„œ ìµœì†Œ í„°ì¹˜ íƒ€ê²Ÿ í¬ê¸° ë³´ì¥
    &.input-xs .input-field,
    &.input-sm .input-field {
      min-height: 44px;
    }
    
    // ëª¨ë°”ì¼ì—ì„œ ì ì ˆí•œ í°íŠ¸ í¬ê¸°
    &.input-xs .input-field { font-size: max(var(--input-font-size-xs), 16px); }
    &.input-sm .input-field { font-size: max(var(--input-font-size-sm), 16px); }
  }
}

// =============================================================================
// ğŸ¯ Print Styles
// =============================================================================

@media print {
  .input-container {
    .input-field {
      border: 1px solid #000;
      background: transparent;
      color: #000;
      box-shadow: none;
    }
    
    .input-icon,
    .input-message.message-loading {
      display: none;
    }
    
    .input-label,
    .input-help-text,
    .input-message {
      color: #000;
    }
  }
}

// =============================================================================
// ğŸ¯ Component Registration (ì„ íƒì‚¬í•­)
// =============================================================================

.recursive-component.input {
  /* ì»´í¬ë„ŒíŠ¸ ë“±ë¡ì„ ìœ„í•œ ê¸°ë³¸ í´ë˜ìŠ¤ */
  display: block;
  position: relative;
}

// =============================================================================
// ğŸ¯ Responsive Design
// =============================================================================

@media (min-width: 640px) {
  .input-container {
    &:not(.full-width) {
      max-width: 384px;
    }
  }
}

@media (min-width: 768px) {
  .input-container {
    &:not(.full-width) {
      max-width: 448px;
    }
  }
}

@media (min-width: 1024px) {
  .input-container {
    &:not(.full-width) {
      max-width: 512px;
    }
  }
} 